[toc]

```java
class Solution {
    public boolean isBipartite(int[][] graph) {
       if (graph == null || graph.length == 0) return true;

       int n = graph.length;
       // 结点着色，0未访问,1表示颜色1,2表示颜色2，相邻结点不能相同
       int[] color = new int[n];
        for (int i = 0; i < n; i++) {
            // 未遍历的点标记为颜色1，并开始你深度优先搜索
            if (color[i] == 0 && !dfs(i, graph, color, 1)) return false;
        }
        return true;
    }

    private boolean dfs(int start, int[][] graph, int[] color, int col) {
        // 遍历点已被访问，颜色不相符则返回false，相符返回true
        if (color[start] != 0) {
            return color[start] == col;
        }
        // 标记颜色
        color[start] = col;
        // 遍历后继
        for (int i = 0; i < graph[start].length; i++) {
            int cur = graph[start][i];
            if (!dfs(cur, graph, color, col ^ 3)) return false;
        }
        return true;
    }
}
```



```java
class Solution {
    public boolean isBipartite(int[][] graph) {
        if (graph == null || graph.length == 0) return true;

        int n = graph.length;
        // 结点着色，0未访问,1表示颜色1,2表示颜色2，相邻结点不能相同
        int[] color = new int[n];
        Queue<Integer> queue = new LinkedList<>();
        for (int i = 0; i < n; i++) {
            // 已遍历，跳过
            if (color[i] != 0) continue;

            // 颜色初始为1，加入起始结点
            int col = 1;
            queue.add(i);
            while (!queue.isEmpty()) {
                // 遍历同层结点
                int size = queue.size();
                for (int j = 0; j < size; j++) {
                    int cur = queue.poll();
                    if (color[cur] != 0) {
                        // 着色冲突
                        if (color[cur] != col) return false;
                        // 已遍历，跳过
                        continue;
                    }
                    // 着色
                    color[cur] = col;
                    // 加入下一层结点
                    for (int k = 0; k < graph[cur].length; k++) {
                        queue.add(graph[cur][k]);
                    }
                }
                // 颜色转换
                col ^= 3;
            }
        }
        return true;
    }
}
```

