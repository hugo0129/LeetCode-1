[toc]

```java
class Solution {
    // 摄像头计数
    private int count;
    // 摄像头覆盖的结点集合
    private Set<TreeNode> record;

    public int minCameraCover(TreeNode root) {
        count = 0;
        record = new HashSet<>();
        record.add(null);
        cover(root, null);
        return count;
    }

    private void cover(TreeNode cur, TreeNode parent) {
        if(cur == null) return;
        cover(cur.left, cur);
        cover(cur.right, cur);
        // 当前子节点都被覆盖
        if(record.contains(cur.left) && record.contains(cur.right)) {
            // 如果存在父节点，父节点可添加摄像头或不存在父节点但当前结点也被覆盖
            if(parent != null || record.contains(cur)) return;
            // 不存在父节点，则是根节点，添加摄像头
            count++;
            record.add(cur);
        }
        // 当前子节点不全被覆盖，当前结点添加摄像头
        else {
            count++;
            record.add(cur);
            record.add(cur.left);
            record.add(cur.right);
            record.add(parent);
        }

    }
}
```
