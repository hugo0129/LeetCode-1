[toc]

```java
class Solution {
    public String smallestEquivalentString(String A, String B, String S) {
        if(A == null || B == null || A.length() != B.length()) throw new IllegalArgumentException("invalid param");
        DisJoint disJoint = new DisJoint(26);
        for (int i = 0; i < A.length(); i++) {
            disJoint.union(disJoint.find(A.charAt(i) - 'a'), disJoint.find(B.charAt(i) - 'a'));
        }
        StringBuffer sb = new StringBuffer();
        for (int i = 0; i < S.length(); i++) {
            sb.append((char)(disJoint.find(S.charAt(i) - 'a') + 'a'));
        }
        return sb.toString();
    }
}

class DisJoint {
    private int size;
    private int[] tree;

    DisJoint(int size) {
        this.size = size;
        this.tree = new int[size];
        Arrays.fill(tree, -1);
    }
    // 根据题意，按照字典序合并，即索引大的合并到索引小的下面
    public void union(int root1, int root2) {
        if(tree[root1] >= 0 || tree[root2] >= 0) throw new IllegalArgumentException("not a root");
        if(root1 == root2) return;

        // 树2大，树1并入树2
        if(root1 > root2) {
            tree[root2] += tree[root1];
            tree[root1] = root2;
        } else {
            tree[root1] += tree[root2];
            tree[root2] = root1;
        }
        size--;
    }
    // 路径压缩
    public int find(int val) {
        if(tree[val] < 0) return val;
        return tree[val] = find(tree[val]);
    }

    public int size() {
        return size;
    }
}
```
