[toc]

```java
class Solution {
    public int minAddToMakeValid(String S) {
        if(S == null || S.isEmpty()) {
            return 0;
        }
        int count = 0;
        // 层数
        int level = 0;
        for(char c : S.toCharArray()) {
            if(c == '(') {
                // 前面字符串缺失开括号
                if(level < 0) {
                    count -= level;
                    level = 0;
                }
                level++;
            } else {
                level--;
            }
        }
        if (level < 0) {
            count -= level;
        } else {
            count += level;
        }
        return count;
    }
}
```





```java
class Solution {
    public int minAddToMakeValid(String S) {
        if(S == null || S.isEmpty()) {
            return 0;
        }
        int count = 0;
        Stack<Character> stack = new Stack<>();
        for(char c : S.toCharArray()) {
            if(c == ')') {
                if(!stack.isEmpty()) {
                    stack.pop();
                } else {
                    count++;
                }
            } else {
                stack.push(c);
            }
        }
        if(!stack.isEmpty()) {
            count += stack.size();
        }
        return count;
    }
}
```

