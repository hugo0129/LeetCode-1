[toc]

```java
class Solution {
    public boolean isMatch(String s, String p) {
        return isMatch(s, p, 0, 0);
    }

    private boolean isMatch(String s, String p, int l, int r) {
        if (s.length() == l) {
            while (r < p.length()) {
                if (r + 1 >= p.length() || p.charAt(r + 1) != '*') break;
                r += 2;
            }
            if (p.length() == r) return true;
            return false;
        }
        if (p.length() == r) return false;

        // 匹配所有字符
        if (p.charAt(r) == '.') {
            // s后的字符继续匹配.*，及s后的字符匹配.*后的字符两种情况
            if (r + 1 < p.length() && p.charAt(r + 1) == '*') {
                return isMatch(s, p, l, r + 2) || isMatch(s, p, l + 1, r) || isMatch(s, p, l + 1, r + 2);
            }
            // 继续向后匹配
            else {
                return isMatch(s, p, l + 1, r + 1);
            }
        }
        // 单词
        else {
            if (r + 1 < p.length() && p.charAt(r + 1) == '*') {
                if (p.charAt(r) == s.charAt(l)) return isMatch(s, p, l, r + 2) || isMatch(s, p, l + 1, r) || isMatch(s, p, l + 1, r + 2);
                else return isMatch(s, p, l, r + 2);
            } else {
                // 相等，匹配下一个
                if (p.charAt(r) == s.charAt(l)) return isMatch(s, p, l + 1, r + 1);
                    // 不相等，返回
                else return false;
            }
        }
    }
}
```
