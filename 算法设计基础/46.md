[toc]

```java
class Solution {
    List<List<Integer>> res;
    boolean[] flag;

    public List<List<Integer>> permute(int[] nums) {
        res = new LinkedList<>();
        if (nums == null || nums.length == 0) return res;

        flag = new boolean[nums.length];
        permute(nums, new LinkedList<>());
        return res;
    }

    private void permute(int[] nums, List<Integer> temp) {
        boolean end = true;
        for (int i = 0; i < nums.length; i++) {
            // 已加入序列，继续
            if (flag[i]) continue;
            // 未结束，结束标识置为false
            end = false;

            // 试探
            flag[i] = true;
            temp.add(nums[i]);
            permute(nums, temp);
            // 回溯
            flag[i] = false;
            temp.remove(temp.size() - 1);
        }
        // 如果序列已结束，则加入
        if (end) {
            res.add(new LinkedList<>(temp));
        }

    }
}
```
